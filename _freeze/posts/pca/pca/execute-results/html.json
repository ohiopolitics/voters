{
  "hash": "3175573e879e62cbf481adfbd23cd88a",
  "result": {
    "markdown": "---\ntitle: Trends between Democrats and Republicans\nauthor: Data Wizards\ndate: 2023-3-31\ncategories:\n  - politics\n  - visualization\n  - statistics\n  - python\nimage: pca.png\nformat:\n  html:\n    code-fold: true\n---\n\n```{r}\nlibrary(tidyverse)\nlibrary(arrow)\nvote <- read_parquet('../../../SWVF_1_full.parquet')\ntotal_pop <- 11756058*.728\nsummary <- vote %>%\n  group_by(party_affiliation) %>%\n  summarise(count=n())\nunregistered <- total_pop - sum(summary$count)\nsummary <- summary %>%\n  add_row(party_affiliation = 'Unregistered', count=unregistered)\nsummary$party_affiliation <- c('Unaffiliated','Democrat','Libertarian','Republican','Unregistered')\n\n\nggplot(summary,aes(y=reorder(party_affiliation,count),\n                   x=count,\n                   fill=party_affiliation,\n                   label=paste(round(count/total_pop,2)*100),'%'))+\n  geom_col() +\n  theme_minimal() +\n  geom_text(nudge_x=90000) +\n  scale_fill_manual(values=c('Republican'='red','Democrat'='blue','Libertarian'='yellow','Unaffiliated'='purple'),na.value = 'grey')+\n  theme(legend.position='none',\n        panel.grid.minor = element_blank()) +\n  scale_x_continuous(breaks=c(500000,1000000,5000000),labels=c('500','1,000','5,000')) +\n  labs(x='Total Voters (in thousands)',y='Party',title='Most People Haven\\'t Registered')\n```\n\n```{r}\nvote$age = 2023 - year(as_datetime(vote$date_of_birth))\n\nvote <- vote %>% \n  mutate(age_range = case_when(age <= 25 ~ '18-25',\n                               age <= 40 ~ '26-40',\n                               age <= 64 ~ '40-64',\n                               age > 64 ~ '65+'))\n\nage_sum <- vote %>%\n  group_by(age_range,party_affiliation) %>%\n  summarise(count = n())\n\nf= ggplot(age_sum, aes(x=age_range,y=count,fill=party_affiliation)) +\n  geom_col(position='dodge')\n\nf %>% plotly::ggplotly()\n```\n\n",
    "supporting": [
      "pca_files"
    ],
    "filters": [],
    "includes": {}
  }
}